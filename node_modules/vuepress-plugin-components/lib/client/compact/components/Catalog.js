import{usePageData as I,useSiteData as L}from"@vuepress/client";import{defineComponent as b,computed as y,h as a}from"vue";import{useRouter as O,RouterLink as g}from"vue-router";import{keys as C,useLocaleConfig as S,startsWith as N,endsWith as d}from"vuepress-shared/client";import"../../styles/font-icon.scss";import"../styles/catalog.scss";var v=b({name:"FontIcon",props:{icon:{type:String,default:""},color:{type:String,default:""},size:{type:[String,Number],default:""}},setup(t){const f=y(()=>{const u={};return t.color&&(u.color=t.color),t.size&&(u["font-size"]=Number.isNaN(Number(t.size))?t.size:`${t.size}px`),C(u).length?u:null});return()=>t.icon?a("span",{key:t.icon,class:["font-icon icon",FONT_ICON_TYPE==="fontawesome"?"fa-fw fa-sm":"",t.icon.includes(" ")?t.icon:`${FONT_ICON_PREFIX}${t.icon}`],style:f.value}):null}}),R=b({name:"Catalog",props:{base:{type:String,default:""},level:{type:Number,default:3},titleGetter:{type:Function,default:t=>t.title},iconGetter:{type:Function,default:t=>t.icon},orderGetter:{type:Function,default:t=>t.order||0},shouldIndex:{type:Function,default:t=>t.index!==!1}},setup(t){const f=S(CATALOG_LOCALES),u=I(),w=O(),k=L(),x=()=>{const c=t.base||u.value.path.replace(/\/[^/]+$/,"/"),m=w.getRoutes(),h=[];return m.filter(({meta:l,path:e})=>{if(!N(e,c)||e===c)return!1;if(c==="/"){const n=C(k.value.locales).filter(r=>r!=="/");if(e==="/404.html"||n.some(r=>N(e,r)))return!1}return(d(e,".html")&&!d(e,"/index.html")||d(e,"/"))&&t.shouldIndex(l)}).map(({path:l,meta:e})=>{const n=l.substring(c.length).split("/").length;return{title:t.titleGetter(e),icon:t.iconGetter(e),base:l.replace(/\/[^/]+\/?$/,"/"),order:t.orderGetter(e),level:d(l,"/")?n-1:n,path:l}}).filter(({title:l,level:e})=>e<=t.level||!l).sort(({title:l,level:e,path:n,order:r},{title:i,level:o,path:p,order:s})=>e-o||(d(n,"/index.html")?-1:d(p,"/index.html")?1:r===null?s===null?l.localeCompare(i):s:s===null?r:r>0?s>0?r-s:-1:s<0?r-s:1)).forEach(l=>{var e;const{base:n,level:r}=l;switch(r){case 1:h.push(l);break;case 2:{const i=h.find(o=>o.path===n);i&&(i.children??(i.children=[])).push(l);break}default:{const i=h.find(o=>o.path===n.replace(/\/[^/]+\/$/,"/"));if(i){const o=(e=i.children)==null?void 0:e.find(p=>p.path===n);o&&(o.children??(o.children=[])).push(l)}}}}),h},F=y(()=>x());return()=>a("div",{class:"catalog-wrapper"},[a("h2",{class:"main-title"},f.value.title),...F.value.map(({children:c=[],icon:m,path:h,title:l},e)=>[a("h3",{id:l,class:["child-title",{"has-children":c.length}]},[a("a",{href:`#${l}`,class:"header-anchor"},"#"),a(g,{class:"catalog-title",to:h},()=>[m?a(v,{icon:m}):null,`${e+1}. ${l||"Unknown"}`])]),c.length?a("ul",{class:"child-catalog-wrapper"},c.map(({children:n=[],icon:r,path:i,title:o},p)=>a("li",{class:"child-catalog-item"},[a("div",{class:["sub-title",{"has-children":n.length}]},[a("a",{href:`#${o}`,class:"header-anchor"},"#"),a(g,{class:"catalog-title",to:i},()=>[r?a(v,{icon:r}):null,`${e+1}.${p+1} ${o||"Unknown"}`])]),n.length?a("div",{class:"sub-catalog-wrapper"},n.map(({icon:s,path:$,title:G},z)=>a(g,{class:"sub-catalog-item",to:$},()=>[s?a(v,{icon:s}):null,`${e+1}.${p+1}.${z+1} ${G||"Unknown"}`]))):null]))):null])])}});export{R as default};
//# sourceMappingURL=Catalog.js.map
