import{useEventListener as n}from"@vueuse/core";import{ref as c,computed as h,unref as m,onMounted as b,isRef as w,watch as N,defineComponent as S,h as f}from"vue";import{checkIsMobile as B}from"vuepress-shared/client";import"../styles/bili-bili.scss";import{isString as v}from"@vuepress/shared";const y=e=>v(e)?e:`${e}px`,$=(e,t=0)=>{const a=c(),l=h(()=>y(m(e.width)||"100%")),o=c("auto"),p=r=>{if(v(r)){const[u,s]=r.split(":"),g=Number(u)/Number(s);if(!Number.isNaN(g))return g}return typeof r=="number"?r:16/9},d=r=>{const u=m(e.height),s=p(m(e.ratio));return u?y(u):`${Number(r)/s+m(t)}px`},i=()=>{a.value&&(o.value=d(a.value.clientWidth))};return b(()=>{i(),w(t)&&N(t,()=>i()),n("orientationchange",()=>i()),n("resize",()=>i())}),{el:a,width:l,height:o}},k="accelerometer; autoplay; clipboard-write; encrypted-media; fullscreen; gyroscope; picture-in-picture";var x=S({name:"BiliBili",props:{bvid:{type:String,required:!0},title:{type:String,default:"A BiliBili video"},page:{type:[String,Number],default:1},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:void 0},ratio:{type:[String,Number],default:16/9},time:{type:[String,Number],default:0},lowQuality:Boolean,noDanmaku:Boolean},setup(e){const t=c(!1),a=h(()=>t.value?0:68),l=()=>{t.value=B(navigator.userAgent)||o.value.clientWidth<640},{el:o,width:p,height:d}=$(e,a),i=h(()=>`https://player.bilibili.com/player.html?bvid=${e.bvid}&t=${e.time}&high_quality=${e.lowQuality?0:1}&page=${e.page}&danmaku=${e.noDanmaku?0:1}`);return b(()=>{l(),n("orientationchange",()=>l()),n("resize",()=>l())}),()=>[f("div",{class:"bili-desc"},f("a",{class:"sr-only",href:i.value},e.title)),f("iframe",{ref:o,src:i.value,title:e.title,class:"bili-iframe",allow:k,style:{width:p.value,height:d.value}})]}});export{x as default};
//# sourceMappingURL=BiliBili.js.map
