import{ref as h,computed as c,unref as o,onMounted as S,isRef as y,watch as w,defineComponent as N,h as d}from"vue";import"../styles/repl-it.scss";import{isString as g}from"@vuepress/shared";import{useEventListener as b}from"@vueuse/core";const v=e=>g(e)?e:`${e}px`,$=(e,i=0)=>{const n=h(),s=c(()=>v(o(e.width)||"100%")),t=h("auto"),u=r=>{if(g(r)){const[p,f]=r.split(":"),m=Number(p)/Number(f);if(!Number.isNaN(m))return m}return typeof r=="number"?r:16/9},l=r=>{const p=o(e.height),f=u(o(e.ratio));return p?v(p):`${Number(r)/f+o(i)}px`},a=()=>{n.value&&(t.value=l(n.value.clientWidth))};return S(()=>{a(),y(i)&&w(i,()=>a()),b("orientationchange",()=>a()),b("resize",()=>a())}),{el:n,width:s,height:t}};var k=N({name:"Replit",props:{link:{type:String,default:""},user:{type:String,default:""},repl:{type:String,default:""},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:void 0},ratio:{type:[String,Number],default:16/9},theme:{type:String,default:"light"},file:{type:String,default:()=>null},plain:Boolean,text:{type:String,default:"Open on Replit"}},setup(e){const{el:i,width:n,height:s}=$(e),t=c(()=>{var u;if(e.link){const l=new URL(e.link);return e.plain?l.searchParams.delete("embed"):l.searchParams.set("embed","true"),l.toString()}return e.user&&e.repl?`https://replit.com/@${e.user}/${e.repl}${e.plain?"":"?embed=true"}${(u=e.file)!=null&&u.length?`#${e.file}`:""}`:null});return()=>t.value?d("div",{class:"replit-wrapper"},e.plain?d("button",{class:"replit-button",onClick:()=>{window.open(t.value,"_blank")}},e.text):d("iframe",{ref:i,class:"replit-iframe",src:t.value,style:{width:n.value,height:s.value}})):null}});export{k as default};
//# sourceMappingURL=Replit.js.map
